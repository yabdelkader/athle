<!DOCTYPE html>
<html lang="fr">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">


<link href="../css/bootstrap.min.css" media="screen" rel="stylesheet" type="text/css" />
<link href="../css/dataTables.bootstrap.min.css" media="screen" rel="stylesheet" type="text/css" />
<link href="../css/athle.css" media="screen" rel="stylesheet" type="text/css" />


<script src="../js/jquery-1.12.3.js" type="text/javascript"></script>
<script src="../js/jquery.dataTables.min.js" type="text/javascript"></script>
<script src="../js/dataTables.bootstrap.min.js"></script>
<script src="../js/bootstrap.min.js" type="text/javascript"></script>

<style type="text/css">
pre {
	width : 700px;
}

fieldset.scheduler-border {
    border: 1px groove #ddd !important;
    padding: 0 1.4em 1.4em 1.4em !important;
    margin: 0 0 1.5em 0 !important;
    -webkit-box-shadow:  0px 0px 0px 0px #000;
            box-shadow:  0px 0px 0px 0px #000;
}
legend.scheduler-border {
    width:inherit; /* Or auto */
    padding:0 10px; /* To give a bit of padding on the left and right */
    border-bottom:none;
}
</style>

<title>Resultats par épreuve</title>
</head>

<body>
	<article class="content">
		<div class="col-sm-offset-2 col-sm-8">
			<nav class="navbar" role="navigation" id="menu">
			<ul class="nav nav-pills">
				<li id="index"><a href="../index.html">Accueil</a></li>
				<li id="athletes"><a href="../recherche_athlete.html">Athl&egrave;tes</a></li>
				<li id="cross" role="presentation" class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Cross<span class="caret"></span></a>
					<ul class="dropdown-menu">
						<li><a href="resultats.html">Résultats</a></li>
					</ul>
				</li>
				<li id="statistiques" role="presentation" class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Bilans &amp; statistiques<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="../bilans.html">Bilans selon recherche multi-crit&egrave;res</a></li><li><a href="ages.html">Statistiques &acirc;ge</a></li><li id="international"><a href="../international.html">Statistiques nationalités</a></li></ul></li>
				<li id="records" role="presentation" class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Records<span class="caret"></span></a><ul class="dropdown-menu"><li><li><a href="../records_pays_epreuve.html">Par &eacute;preuve</a></li><li><a href="../rang_pays.html">Par pays</a></li><li><a href="../import_records_wikipedia.html">Commentaires</a></li></ul></li>
				<li id="objectifs" role="presentation" class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Objectifs<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="../2018.html">2018</a></li><li><a href="../2019.html">2019</a></li><li><a href="../2020.html">2020</a></li></ul></li>
				<li id="a_propos" role="presentation"><a href="../a_propos.html">&Agrave; propos</a></li>
			</ul>
		</div>
		
		<div class="col-sm-5">
			<form class="form-horizontal"  action="resultats_cross.php" method="post">
				<div class="form-group">
					<label class="control-label col-sm-2" >Sexe</label> 
					<div class="col-sm-10">
						<label class="radio-inline"><input type="radio" name="sexe1" value="0" required="required" checked="checked">Masculin</label>
						<label class="radio-inline"><input type="radio" name="sexe1" value="1">Féminin</label>
					</div>
					
					<label class="control-label col-sm-2" >Catégorie</label>
					<div class="col-sm-10">
						<label class="radio-inline"><input type="radio" name="categorie1" value="senior" checked="checked">Senior</label>
						<label class="radio-inline"><input type="radio" name="categorie1" value="master">Master</label>
					</div>
					
					<label class="control-label col-sm-2" >Année</label>
					<div class="col-sm-3">
						<input class="form-control" type="number" name="annee1" value="2010">
					</div>	
				</div>
			</form>
			<table class="table table-striped table-bordered" id="table_resultats1"></table>
		</div>

		<div class="col-sm-4">
			<form class="form-horizontal"  action="resultats_cross.php" method="post">
				<div class="form-group">
					<label class="control-label col-sm-2" >Sexe</label> 
					<div class="col-sm-10">
						<label class="radio-inline"><input type="radio" name="sexe" value="0" required="required" selected="selected">Masculin</label>
						<label class="radio-inline"><input type="radio" name="sexe" value="1">Féminin</label>
					</div>
					
					<label class="control-label col-sm-2" >Catégorie</label>
				
					<div class="col-sm-2">
						<label class="radio-inline"><input type="radio" name="categorie" value="senior">Senior</label><br/>
						<label class="radio-inline"><input type="radio" name="categorie" value="master">Master</label>
					</div>
				</div>
			</form>
			<table class="table table-striped table-bordered" id="table_resultats2"></table>
		</div>

	</article>
	
	<script type="text/javascript">

    function selection() {
        
    	var sexe      = $("input[name='sexe1']:checked").val();
    	var categorie = $("input[name='categorie1']:checked").val();
    	var annee     = $("input[name='annee1']").val();

    	if (sexe == undefined || categorie == undefined || annee == undefined){
			return;    		
    	}

    	var xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {

            	var reponseGetResultats = this.responseText;
                
	            var jsonData = JSON.parse(reponseGetResultats);
	            // for (var i = 0; i < jsonData.resultats.length; i++) {
	            // 	pays = jsonData.resultats[i];
	            //}
	            charge(jsonData.cross);

            }
        };
        xmlhttp.open("GET", "getCross.php?categorie=" + categorie + "&seye=" + sexe + "&annee=" + annee, true);
        xmlhttp.send();
    	
    }
    
    function charge(cross){
        
    	var laTable = $("#table_resultats1").DataTable();

    	laTable.clear();
    	
    	for (var i = 0; i < cross.length; i++) {
    		laTable.row.add({r: cross[i].r, c: cross[i].c, n: cross[i].n}).draw();
    	}
    }
	$('.dropdown-toggle').dropdown();
	
	var resultats = { data : [
		
	]};
		
	var table = $('#table_resultats1').DataTable({
			data : resultats.data,
	        "paging": false, 
	        "info": false,         
		  columns : [
		    { data: 'r', title: 'Rang' },
		    { data: 'c', title: 'Chrono' },
		    { data: 'n', title: 'Nom' }
  
	      ]  
		});

	var pays = {'resultat' : []};

	var elts = document.querySelectorAll("input");
	for (var i = 0; i < elts.length; i++){
		elts[i].addEventListener("change", selection, true);
	}		

	</script>
	
	<script>document.getElementById("cross").setAttribute("class", "active");</script>
</body>
</html>