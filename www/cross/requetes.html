<!DOCTYPE html>
<html lang="fr">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>Cross - requêtes</title>
	<link href="../css/bootstrap.min.css" media="screen, projection" rel="stylesheet" type="text/css" />

	<script src="js/jquery-3.3.1.js" type="text/javascript"></script>
	<script src="js/jquery.dataTables.min.js" type="text/javascript"></script>
	<script src="../js/bootstrap.min.js" type="text/javascript"></script>

<style type="text/css">
section > ul > li {
margin-top: 15px;
margin-bottom: 15px;
}

section > ul {
margin-left: -24px;
}

table {
 font-size: 0.8em;
}

th, td {
padding:5px;
border:solid 1px black;
}

pre {
 font-size: 12px;
}

.red {
background-color: #AAEEAA;
}
</style>

</head>
<body>
	<article>

		<div class="col-sm-2"></div>

		<div class="col-sm-8">


			<nav class="navbar" role="navigation" id="menu">
			<ul class="nav nav-pills">
				<li id="index"><a href="index.html">Accueil</a></li>
				<li id="athletes"><a href="recherche_athlete.html">Athl&egrave;tes</a></li>
				<li id="cross" role="presentation" class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Cross<span class="caret"></span></a>
					<ul class="dropdown-menu">
						<li><a href="resultats.html">Résultats</a></li>
					</ul>
				</li>
				<li id="statistiques" role="presentation" class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Bilans &amp; statistiques<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="../bilans.html">Bilans selon recherche multi-crit&egrave;res</a></li><li><a href="ages.html">Statistiques &acirc;ge</a></li><li id="international"><a href="international.html">Statistiques nationalités</a></li></ul></li>
				<li id="records" role="presentation" class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Records<span class="caret"></span></a><ul class="dropdown-menu"><li><li><a href="../records_pays_epreuve.html">Par &eacute;preuve</a></li><li><a href="rang_pays.html">Par pays</a></li><li><a href="import_records_wikipedia.html">Commentaires</a></li></ul></li>
				<li id="objectifs" role="presentation" class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Objectifs<span class="caret"></span></a><ul class="dropdown-menu"><li><a href="../2018.html">2018</a></li><li><a href="../2019.html">2019</a></li><li><a href="../2020.html">2020</a></li></ul></li>
				<li id="a_propos" role="presentation"><a href="../a_propos.html">&Agrave; propos</a></li>
			</ul>
			
			</nav>
	</div>

	<div class="col-sm-offset-2 col-sm-8">

		<div class="alert alert-info">
			<div style="text-align: center;">
				<div style="font-weight: bold;font-size: 1.3em">Cross - requêtes</div>
	 		</div>
	 	<br/>
		<ul style="list-style-type: none;">
			<li><a href="#questions">1. Requêtes</a></li>
			<ul style="list-style-type: none;">
				<li><a href="#1.1">Plus médaillés</a></li>
				<li><a href="#1.2">Plus grand écart 1er et 2nd</a></li>
				<li><a href="#1.3">Plus grand nombre de particpations (athlètes)</a></li>
				<li><a href="#1.4">Plus grand nombre de particpations (clubs)</a></li>
				<li><a href="#1.5">Quantité de turn over</a></li>
				<li><a href="#1.6">Fidélité au club</a></li>
				<li><a href="#1.7">Âge moyen</a></li>
			</ul>
			
			<li><a href="#technique">2. Technique</a></li>
		</ul>
	
		</div>
	
	</div>
	
	
	<section class="col-sm-offset-2 col-sm-8">

<h2 id="questions">1. Requêtes</h2>

<h3 id="1.1">Plus médaillés</h3>

<h3 id="1.2">Plus grand écart 1er et 2nd</h3>

<h3 id="1.3">Plus grand nombre de particpations (athlètes)</h3>

<h3 id="1.4">Plus grand nombre de particpations (clubs)</h3>

<h3 id="1.5">Quantité de turn over</h3>

<h3 id="1.6">Fidélité au club</h3>

<h3 id="1.7">Âge moyen</h3>


<h2 id="technique">3. Technique &amp; difficultés</h2> 	
 	
<h3>Mélange de catégories</h3>

Il arrive que des vétérans courent chez les séniors.

Chez les femmes c'est la règles. Vétérannes et parfois les juniors. Cela demande calcul pour les classements.
 
<h3>Index</h3>

CREATE  INDEX idx_annee  ON cros ( annee );

<h3>Nom long</h3>

<code>nom VARCHAR(32)</code> ne suffit pas toujours.


<h2>Nommage</h2>

Vétéran devient Master en xxxx

Des vétérans courent chez les séniors.




<h2>SQL</h2>


<pre>

SELECT SUBSTRING(cat, 1,3) FROM cros;
SELECT SUBSTRING(cat, 5) FROM cros;

UPDATE cros SET naissance = SUBSTRING(cat, 5) WHERE naissance = 99;
UPDATE cros SET naissance = (0 + SUBSTRING(cat, 5)) WHERE naissance = 99;
UPDATE cros SET cat = SUBSTRING(cat, 1, 3) WHERE LENGTH(cat) > 3;

UPDATE cros SET chrono = REPLACE(chrono, '_', '''');

SELECT  annee, cat, championnat, sexe, count(*) FROM cros group by annee, championnat, sexe, cat;



"INSERT INTO cros (rang, chrono, nom, club, sexe, dep, cat, naissance, championnat, annee) VALUES (" & A1 & ",'" & B1 & "','" & C1 & "','" & D1 & "','M','" & E1 & "','" & F1 & "',99,'lifa', 2010);"

ALTER TABLE cros ADD CONSTRAINT unik UNIQUE    (annee,rang,championnat,sexe,cat);

SELECT * FROM cros c1 JOIN cros c2 ON c1.nom = c2.nom AND c1.sexe != c2.sexe;

UPDATE cros SET dep = SUBSTRING(dep, 2) WHERE LENGTH(dep) > 2



update cros set cat = SUBSTRING(cat, 1, 3)  where LENGTH(cat) > 3;

SELECT * FROM cros where annee = 2012 and rang = 35 and sexe = 'M' AND cat like 'V1M%';
update cros set cat = 'SVM/68' where id = 2055;


-- [sexe, annee, championnat]

"INSERT INTO cros (rang, chrono, nom, club, sexe, dep, cat, naissance, championnat, annee) VALUES (" & A1 & ",'" & B1 & "','" & C1 & "','" & D1 & "','F','" & E1 & "','" & F1 & "',99,'dep', 2014);"
"INSERT INTO cros (rang, chrono, nom, club, sexe, dep, cat, naissance, championnat, annee) VALUES (" & A1 & ",'" & B1 & "','" & C1 & "','" & D1 & "','M','" & E1 & "','" & F1 & "',99,'dep', 2014);"

"INSERT INTO cros (rang, chrono, nom, club, sexe, dep, cat, naissance, championnat, annee) VALUES (" & A1 & ",'" & B1 & "','" & C1 & "','" & D1 & "','F','" & E1 & "','" & F1 & "',99,'reg', 2014);"
"INSERT INTO cros (rang, chrono, nom, club, sexe, dep, cat, naissance, championnat, annee) VALUES (" & A1 & ",'" & B1 & "','" & C1 & "','" & D1 & "','M','" & E1 & "','" & F1 & "',99,'reg', 2014);"

"INSERT INTO cros (rang, chrono, nom, club, sexe, dep, cat, naissance, championnat, annee) VALUES (" & A1 & ",'" & B1 & "','" & C1 & "','" & D1 & "','F','" & E1 & "','" & F1 & "',99,'lifa', 2014);"
"INSERT INTO cros (rang, chrono, nom, club, sexe, dep, cat, naissance, championnat, annee) VALUES (" & A1 & ",'" & B1 & "','" & C1 & "','" & D1 & "','M','" & E1 & "','" & F1 & "',99,'lifa', 2014);"

</pre>

</section>
<br/><br/>

</article>

<footer class="col-md-offset-3 col-md-6">
	<hr />
	<p style="text-align: center;">
		<i>Dernière MAJ <time pubdate="pubdate">06/02/2019</time></i>
	</p>
</footer>

	<script>document.getElementById("cross").setAttribute("class", "active");</script>
</body>
</html>