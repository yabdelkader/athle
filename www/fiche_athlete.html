<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<link href="css/bootstrap.min.css" media="screen"
	rel="stylesheet" type="text/css" />
<!-- <link href="css/bootstrap-theme.css" media="screen" rel="stylesheet" type="text/css" /> -->
<link href="css/dataTables.bootstrap.min.css" media="screen"
	rel="stylesheet" type="text/css" />


<script src="js/jquery-1.12.3.js" type="text/javascript"></script>
<script src="js/jquery.dataTables.min.js" type="text/javascript"></script>
<script src="js/dataTables.bootstrap.min.js"></script>
<script src="js/bootstrap.min.js" type="text/javascript"></script>

</head>


<body>


	<div class="content">

		<div class="col-sm-2"></div>


		<div class="col-sm-8">


			<div id="menu"></div>
			
			
       <div id="chart_div" style="width: 900px; height: 500px;"></div>
   
<script type="text/javascript" src="charts/google/jsapi?autoload={'modules':[{'name':'visualization','version':'1','packages':['corechart']}]}"></script>
   
<script type="text/javascript">
   google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Year', '800', '1500', '3000', '10 km'],
          ['2010', 712,			 622, 0, 0],
          ['2011', 721, 		608, 0, 0],
          ['2012', 911, 		760, 530, 700],
          ['2013', 830, 		775, 730, 710],
          ['2014', 788, 		760, 700, 725]
        ]);

        var options = {
          title: 'Meilleures perfs à la table de cotations par année'
        };

        var chart = new google.visualization.LineChart(document.getElementById('chart_div'));

        chart.draw(data, options);
      }
   </script>
   
   
   <br/><br/>
   		
			

<pre>
SELECT annee,max(e_800), max(e_1500), max(e_3000)
FROM
(
	SELECT annee, 
		CASE idEpreuve
			WHEN 800 THEN points
			WHEN 1500  THEN 0
			WHEN 3000  THEN 0  
		END as e_800,
		
		CASE idEpreuve
			WHEN 800 THEN 0
			WHEN 1500  THEN points
			WHEN 3000  THEN 0
		END as e_1500,
	
		CASE idEpreuve
			WHEN 800 THEN 0
			WHEN 1500 THEN 0
			WHEN 3000  THEN points
		END as e_3000
	
	FROM ligne l
	WHERE l.nom = '[NOM]' AND prenom = '[PREONOM]' AND l.idEpreuve IN (800, 1500, 3000) AND annee > 2005

) tmp
GROUP by annee
</pre>

Note : on n'aurait pu faire plus simple si MySql avait implémenté la fonction PIVOT/UNPIVOT (<a href="http://stackoverflow.com/questions/3392956/sql-how-to-transpose">inversion row/col</a>)

<pre>
2010    744    882
2011    911    933
2012    984    1090
2013	806    703
2014	1547   0
2015	1343   1297
2016	1528   683
</pre>
		</div>
	</div>



	<script src="js/menu.js" type="text/javascript"></script>
	<script>
		document.getElementById("recherche").setAttribute("class", "active");
	</script>
</body>
</html>