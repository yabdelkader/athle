<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
<link href="../css/bootstrap.min.css" media="screen, projection" rel="stylesheet" type="text/css" />
<link href="../css/dataTables.bootstrap.min.css" media="screen, projection" rel="stylesheet" type="text/css" />

<script src="../js/jquery-1.12.3.js" type="text/javascript"></script>
<script src="../js/jquery.dataTables.min.js" type="text/javascript"></script>
<script src="../js/dataTables.bootstrap.min.js"></script>
<script src="../js/bootstrap.min.js" type="text/javascript"></script>

</head>

<body>
	<div class="content">

		<div class="col-sm-2"></div>
		<div class="col-sm-8">

			<div id="menu"></div>
			
			<div class="col-sm-offset-4 col-sm-6" style="margin-top: 30px;">
		
				<div class="alert alert-info" style="padding-right: 0">
					<div style="text-align: center;">
						<div style="font-weight: bold;font-size: 1.3em">Interclubs ACPJ 2009-2019</div>
			 		</div>
			 	<br/>
				<ul style="list-style-type: none;">
			<li><a href="#1">1. Nombre de participations de chaque athlète</a></li>
			<li><a href="#2">2. Points rapportés par athlète, en moyenne</a></li>
			<li><a href="#3">3. Épreuves de chaque athlète</a></li>
			<li><a href="#4">4. Meilleures perfs</a></li>
			<li><a href="#5">5. Épreuves avec zéro</a></li>
			<li><a href="#6">6. Épreuves qui rapportent le plus de points</a></li>
			<li><a href="#7">7. Points rapportés par Hommes ou Femmes</a></li>
			<li><a href="#8">8. Pour chaque athlète, moyenne rang [1 - 2]</a></li>

				</ul>
			
				</div>
			
			</div>			
			
			<div style="clear: both;"/>


			<h3 id="1">Nombre de participations de chaque athlète</h3>

			<p></p>

			<h3 id="2">Points rapportés par athlète, en moyenne</h3>

			<h3 id="3">Épreuves de chaque athlète</h3>

			<h3 id="4">Meilleures perfs</h3>
			
			<h3 id="5">Épreuves avec zéro</h3>

			<h3 id="6">Épreuves qui rapportent le plus de points</h3>

			<h3 id="7">Points rapportés par Hommes ou Femmes</h3>

			<h3 id="8">Pour chaque athlète, moyenne rang [1 - 2]</h3>




			<div class="row">

				<table class="table table-striped table-bordered" id="table_ecarts"></table>

			</div>
		</div>

		<script src="../js/menu.js" type="text/javascript"></script>




		<script type="text/javascript">
function selection1(){
	recordsSel1 = selectionNum(1);
}

function selection2(){
	recordsSel2 = selectionNum(2);
}


function selection(){

	var laTable = $("#table_ecarts").DataTable();

	laTable.clear();
	
	for (var i = 0; i < listeEpreuves.length; i++) {

		var sel1 = getRecordOfEpreuve(listeEpreuves[i], recordsSel1);
		var sel2 = getRecordOfEpreuve(listeEpreuves[i], recordsSel2);

		if (sel1.length == 0 && sel2.length == 0){
			// rien, pas de record ni pour aucun des deux athlètes
		}
		// sel1 null, sel2 non null
		else if (sel1.length == 0){
			laTable.row.add({e : listeEpreuves[i], nom1 : '', perf1 :  '', nom2 : sel2.nom,  perf2 : sel2.perf, ecart : ''}).draw();
		}
		// sel1 non null, sel2 null
		else if (sel2.length == 0){
			laTable.row.add({e : listeEpreuves[i], nom1 : sel1.nom, perf1 :  sel1.perf, nom2 : '',  perf2 : '', ecart : ''}).draw();
		}
		// les deux athlètes avec perf
		else {
			var compute = computeEcarts(sel1.perf, sel2.perf);
			laTable.row.add({e : listeEpreuves[i], nom1 : sel1.nom, perf1 :  sel1.perf, nom2 : sel2.nom,  perf2 : sel2.perf, ecart : compute}).draw();
		}
	}
	drawChart();
}

// on ne met à jour que la var globale recordsSel1
function selectionNum(num){
	
    $("#table_ecarts tbody").children().remove();
    
}


function createTableHead(){
	
	var records = { data : [
	
	]};
	
	var table = $('#table_ecarts').DataTable({
		data : records.data,
        "paging": false, 
        "info": false,         
	  columns : [
	    { data: 'e', title: 'Epreuve' },
	    { data: 'nom1', title: 'Nom' },
	    { data: 'perf1', title: 'Performance' },    
	    { data: 'nom2', title: 'Nom' },
	    { data: 'perf2', title: 'Performance' },    
	    { data: 'ecart', title: 'Pourcentage' },
      ]  
	});
	recordsSel1 = selectionNum(1);
	recordsSel2 = selectionNum(2);

	selection();
}


</script>

<script type="text/javascript" class="init">

$('.dropdown-toggle').dropdown();


document.getElementById("statistiques").setAttribute("class", "active");

</script>
</body>
</html>
